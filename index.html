<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>未来出行体验问卷</title>
<style>
body{
  margin:0;background:#000;color:#0ff;font-family:Arial,Helvetica,sans-serif;
  display:flex;justify-content:center;align-items:center;height:100vh;overflow:hidden;
}
#screen{width:90%;max-width:420px;text-align:center;}
.text{font-size:20px;line-height:1.6;min-height:140px;}
.opt-btn{
  padding:12px;border:1px solid rgba(0,255,195,0.6);border-radius:8px;margin:8px 0;
  cursor:pointer;backdrop-filter:blur(4px);transition:0.2s;
}
.opt-btn:hover{background:rgba(0,255,195,0.2);transform:scale(1.05);}
.fade{animation:fade .4s ease-out;}@keyframes fade{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>
<div id="screen" class="fade">
  <div id="qtext" class="text">连接未来出行意识中...</div>
  <div id="options"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const SUPABASE_URL = "YOUR_SUPABASE_URL";
const SUPABASE_KEY = "YOUR_ANON_PUBLIC_KEY";
const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// 问题集
const qs = [
  {q:"你的年龄区间是？",opts:["18以下","18-25","26-35","36及以上"]},
  {q:"你更期待2035年的出行方式？",opts:["自动驾驶舱","飞行舱","共享穿梭车","个性化胶囊车"]},
  {q:"你偏好的出行体验风格？",opts:["安静沉浸","社交活力","娱乐流媒体","效率优先"]},
  {q:"如果出行AI给你人格标签，你希望是？",opts:["探索者","思考者","治愈者","行动者"]}
];

let step = 0;

async function saveAnswer(q,ans){
  const {error} = await db.from("answers").insert({step:q,answer:ans,time:new Date().toISOString()});
  if(error) console.log("❌",error); else console.log("✅",q,ans);
}

function render(){
  const s = document.getElementById("screen"); s.classList.remove("fade"); void s.offsetWidth; s.classList.add("fade");
  if(step >= qs.length){
    document.getElementById("qtext").innerHTML = "链接完成。你已进入未来出行意识。<br><br>感谢参与 ✨";
    document.getElementById("options").innerHTML = "";
    return;
  }
  const q = qs[step];
  document.getElementById("qtext").innerText = q.q;
  document.getElementById("options").innerHTML = q.opts.map(o=>`
    <div class='opt-btn' onclick="choose('${q.q}','${o}')">${o}</div>
  `).join('');
}

function choose(q,a){ saveAnswer(q,a); step++; render(); }

// 初始加载
setTimeout(()=>{render();},1200);
</script>
</body>
</html>
